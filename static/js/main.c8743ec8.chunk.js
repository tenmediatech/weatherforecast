(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){},266:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(85),o=a.n(s),i=(a(95),a(97),a(4)),l=a(5),c=a(7),u=a(6),p=a(8),m=(a(57),a(267)),h=a(89),d=a(269),f=function(e){var t=e.component,a=e.user,n=e.render,s=Object(h.a)(e,["component","user","render"]);return a&&n?r.a.createElement(m.a,Object.assign({},s,{render:n})):r.a.createElement(m.a,Object.assign({},s,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(d.a,{to:"/"})}}))},y=a(268),g=a(86),E=a.n(g),b=(a(106),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{to:"/change-password"},"Change Password"),r.a.createElement(y.a,{to:"/sign-out"},"Sign Out"),r.a.createElement(y.a,{to:"/profileindex"},"Profile"),r.a.createElement(y.a,{to:"/weatherapp"},"Weather Forecast"))),w=r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{to:"/sign-up"},"Sign Up"),r.a.createElement(y.a,{to:"/sign-in"},"Sign In")),v=r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{to:"/"},"Home")),O=function(e){var t=e.user;return r.a.createElement("header",{className:"main-header"},r.a.createElement("img",{src:E.a,alt:"Logo",style:{width:"100px",marginLeft:"18px",paddingRight:"14px"}}),r.a.createElement("h1",{style:{fontWeight:"200",fontSize:"60px",color:"#fff"}},"this.weather"),r.a.createElement("nav",null,t&&r.a.createElement("span",null,"Welcome, ",t.email),t?b:w,v))},j=a(13),C=a(271),x="http://localhost:4741",S=function(e){if(e.ok)return e;throw new Error("Recieved status in 400 or 500 range.")},k=function(e){return fetch(x+"/sign-up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credentials:{email:e.email,password:e.password,password_confirmation:e.passwordConfirmation}})})},P=function(e){return fetch(x+"/sign-in",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credentials:{email:e.email,password:e.password}})})},N=function(e,t){return fetch(x+"/change-password",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Token token=".concat(t.token)},body:JSON.stringify({passwords:{old:e.oldPassword,new:e.newPassword}})})},F={signUpSuccess:"Succesfully registered! You've been signed in as well.",signUpFailure:"Registration failed. Email may be taked, or passwords don't match.",signInSuccess:"Welcome!",signInFailure:"Failed to sign in. Check your email and password and try again.",signOutSuccess:"Come back soon!",changePasswordSuccess:"Password changed successfully!",changePasswordFailure:"Failed to change passwords. Check your old password and try again.",profileCreateSuccess:"Created Profile successfully!",profileCreateFailure:"Failed to change passwords. Check your old password and try again.",profileUpdateSuccess:"Password changed successfully!",profileUpdateFailure:"Failed to change passwords. Check your old password and try again."},T="https://weathermeapi.herokuapp.com",U="http://localhost:4741",D="localhost"===window.location.hostname?U:T,A=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){return e.setState(Object(j.a)({},t.target.name,t.target.value))},e.signUp=function(t){t.preventDefault();var a=e.state,n=(a.email,a.password,a.passwordConfirmation,e.props),r=n.flash,s=n.history,o=n.setUser;k(e.state).then(S).then(function(){return P(e.state)}).then(S).then(function(e){return e.json()}).then(function(e){return o(e.user)}).then(function(){return r(F.signUpSuccess,"flash-success")}).then(function(){return s.push("/")}).catch(function(){return r(F.signUpFailure,"flash-error")})},e.state={email:"",password:"",passwordConfirmation:""},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.passwordConfirmation;return r.a.createElement("div",{className:"profileindex"},r.a.createElement("form",{className:"auth-form",onSubmit:this.signUp},r.a.createElement("h3",null,"Sign Up"),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{required:!0,name:"email",value:t,type:"email",placeholder:"Email",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{required:!0,name:"password",value:a,type:"password",placeholder:"Password",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"passwordConfirmation"},"Confirm Password"),r.a.createElement("input",{required:!0,name:"passwordConfirmation",value:n,type:"password",placeholder:"Confirm Password",onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Sign Up")))}}]),t}(n.Component),L=Object(C.a)(A),_=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){return e.setState(Object(j.a)({},t.target.name,t.target.value))},e.signIn=function(t){t.preventDefault();var a=e.state,n=(a.email,a.password,e.props),r=n.flash,s=n.history,o=n.setUser;P(e.state).then(function(e){return e.ok?e:new Error}).then(function(e){return e.json()}).then(function(e){return o(e.user)}).then(function(){return r(F.signInSuccess,"flash-success")}).then(function(){return s.push("/weatherapp")}).catch(function(){return r(F.signInFailure,"flash-error")})},e.state={email:"",password:""},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",{className:"profileindex"},r.a.createElement("form",{className:"auth-form",onSubmit:this.signIn},r.a.createElement("h3",null,"Sign In"),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{required:!0,type:"email",name:"email",value:t,placeholder:"Email",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{required:!0,name:"password",value:a,type:"password",placeholder:"Password",onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Sign In")))}}]),t}(n.Component),z=Object(C.a)(_),I=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.flash,a=e.history,n=e.clearUser;(function(e){return fetch(x+"/sign-out",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token token=".concat(e.token)}})})(e.user).finally(function(){return t(F.signOutSuccess,"flash-success")}).finally(function(){return a.push("/")}).finally(function(){return n()})}},{key:"render",value:function(){return""}}]),t}(n.Component),M=Object(C.a)(I),W=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){return e.setState(Object(j.a)({},t.target.name,t.target.value))},e.changePassword=function(t){t.preventDefault();var a=e.state,n=(a.oldPassword,a.newPassword,e.props),r=n.flash,s=n.history,o=n.user;N(e.state,o).then(S).then(function(){return r(F.changePasswordSuccess,"flash-success")}).then(function(){return s.push("/")}).catch(function(){return r(F.changePasswordFailure,"flash-error")})},e.state={oldPassword:"",newPassword:""},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.oldPassword,a=e.newPassword;return r.a.createElement("div",{className:"profileindex"},r.a.createElement("form",{className:"auth-form",onSubmit:this.changePassword},r.a.createElement("h3",null,"Change Password"),r.a.createElement("label",{htmlFor:"oldpw"},"Old Password"),r.a.createElement("input",{required:!0,name:"oldPassword",value:t,type:"password",placeholder:"Old Password",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"newPassword"},"New Password"),r.a.createElement("input",{required:!0,name:"newPassword",value:a,type:"password",placeholder:"New Password",onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Change Password")))}}]),t}(n.Component),q=Object(C.a)(W),J=a(18),H=a.n(J),R=a(24),B=a(43),G=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.temp;console.log(e);var t={labels:e,datasets:[{label:"Day Temperature",data:e,backgroundColor:"rgba(255, 255, 0, 0.6)",borderColor:"rgba(000, 000, 000, 1)",borderWidth:1}]};return r.a.createElement("div",{className:"chart-container"},r.a.createElement("div",{className:"chart"},r.a.createElement(B.a,{data:t,options:{responsive:!0,tooltips:{mode:"label"},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!0,gridLines:{display:!1},scaleLabel:{display:!0,labelString:"Data each 3 Hour"}}],yAxes:[{display:!0,gridLines:{display:!1},scaleLabel:{display:!0,labelString:"\xb0C"}}]}}})))}}]),t}(n.Component),Y=function(e){return r.a.createElement("div",{className:"weather__infoleft",style:{border:"solid 1px #000",borderRadius:"10px"}},e.city&&e.country&&r.a.createElement("p",null,r.a.createElement("span",{className:"weather__condition"}," ",e.description," ",r.a.createElement("img",{src:e.icon,style:{width:"70px"}})),r.a.createElement("span",{className:"weather__valueleft",style:{fontSize:"60px"}}," ",e.city,", ",e.country)),e.temperature&&r.a.createElement("ul",null,r.a.createElement("li",null,"Temperature: ",r.a.createElement("span",{className:"weather__valueleftdetail"}," ",e.temperature,"\xb0C")),r.a.createElement("li",null,"Humidity: ",r.a.createElement("span",{className:"weather__valueleftdetail"}," ",e.humidity,"%"))),e.error&&r.a.createElement("p",{className:"weather__error"},e.error))},K=function(e){return r.a.createElement("form",{onSubmit:e.getWeather},r.a.createElement("input",{type:"text",name:"city",placeholder:"City..."}),r.a.createElement("input",{type:"text",name:"country",placeholder:"Country..."}),r.a.createElement("button",null,"Get Weather"))},Q=(n.Component,function(e){return r.a.createElement("pre",{style:{fontSize:"16px"}},e.city&&e.country&&r.a.createElement("pre",{style:{color:"#000",fontSize:"18px"}},"Temperature \xb0C   Humidity    Condition"))}),V="e97bfcf895700208a7299aca4aabac62",X=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={city:"",country:"",temperature:"",humidity:"",description:"",icon:"",list:[],error:""},a.getWeather=function(){var e=Object(R.a)(H.a.mark(function e(t){var n,r,s,o;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements.city.value,r=t.target.elements.country.value,e.prev=3,e.next=6,fetch("http://api.openweathermap.org/data/2.5/forecast?q=".concat(n,",").concat(r,"&appid=").concat(V,"&units=metric"));case 6:return s=e.sent,e.next=9,s.json();case 9:o=e.sent,a.setState({city:o.city.name,country:o.city.country,temperature:o.list[0].main.temp,humidity:o.list[0].main.humidity,description:o.list[0].weather[0].description,icon:"http://openweathermap.org/img/w/"+o.list[0].weather[0].icon+".png",list:o.list,error:""}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),a.setState({city:"",country:"",temperature:"",humidity:"",description:"",icon:"",list:[],error:"Oops enter valid input"});case 16:case"end":return e.stop()}},e,this,[[3,13]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=[],t=this.state.list.map(function(t){var a=t.main.temp;e.length<8&&e.push(a);var n=t.main.humidity,s=t.weather[0].description,o="http://openweathermap.org/img/w/"+t.weather[0].icon+".png";return r.a.createElement("pre",{key:a,style:{color:"#000",fontSize:"16px"}},a,"              ",n,"          ",s,"     ",r.a.createElement("img",{src:o}))});return console.log(e),r.a.createElement("div",null,r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"col-xs-5 title-container"},this.state.city&&this.state.country&&r.a.createElement(Y,{temperature:this.state.temperature,humidity:this.state.humidity,city:this.state.city,country:this.state.country,description:this.state.description,icon:this.state.icon,error:this.state.error})),r.a.createElement("div",{className:"col-xs-7 form-container"},r.a.createElement(K,{getWeather:this.getWeather}),this.state.city&&this.state.country&&r.a.createElement(G,{temp:e}),r.a.createElement("hr",null),r.a.createElement(Q,{city:this.state.city,country:this.state.country}),t))))}}]),t}(r.a.Component),Z=a(23),$=a.n(Z),ee=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={deleted:!1},a.handleDelete=function(e){e.preventDefault();var t=a.props.id,n=a.props.user;return fetch(D+"/profiles/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token token=".concat(n.token)}}).then(function(){a.setState({deleted:!0}),a.props.history.push("/profileindex/")})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!0===this.state.deleted?r.a.createElement(d.a,{to:"/profiles"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleDelete},r.a.createElement("button",{type:"submit"},"Delete")))}}]),t}(r.a.Component),te=Object(C.a)(ee),ae=a(44),ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={profile:{name:"",location:"",edited:!1},flashMessage:""},a.handleChange=function(e){var t=Object(ae.a)({},a.state.profile,Object(j.a)({},e.target.name,e.target.value));a.setState({profile:t})},a.handleUpdate=function(e,t,n){e.preventDefault();var r=a.props.id;console.log(r);var s=a.state.profile,o=s.name,i=s.location;return fetch(D+"/profiles/".concat(r),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Token token=".concat(t.token)},body:JSON.stringify({profile:{name:o,location:i}})}).then(S).then(function(){a.setState({edited:!0}),a.props.history.push("/profileindex/")})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;if(!0===this.state.edited)return r.a.createElement(d.a,{to:"/profiles"});var t=this.state,a=t.name,n=t.location,s=this.props,o=(s.id,s.user);return r.a.createElement("div",{className:"profileindex"},r.a.createElement("h2",null,"Edit Profile"),r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{id:"name",name:"name",type:"text",value:a,onChange:this.handleChange,style:{border:"solid 1px #000",width:"240px",marginLeft:"20px"}}),r.a.createElement("label",{htmlFor:"location"},"Location"),r.a.createElement("input",{id:"location",name:"location",type:"text",value:n,onChange:this.handleChange,style:{border:"solid 1px #000",width:"240px",marginLeft:"20px"}}),r.a.createElement("button",{type:"submit",onClick:function(t){return e.handleUpdate(t,o)}},"Update")))}}]),t}(r.a.Component),re=Object(C.a)(ne),se=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={profiles:[]},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(R.a)(H.a.mark(function e(){var t;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("http://localhost:4741/profiles");case 2:t=e.sent,this.setState({profiles:t.data.profiles});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.profiles.map(function(t){var a=t.id,n=t.name,s=t.location,o=e.props.user;return r.a.createElement("tr",{key:a,className:"table-info"},r.a.createElement("td",{className:"table-primary"},r.a.createElement(y.a,{to:"/profileindex/".concat(a)},n)),r.a.createElement("td",{className:"table-primary"},s),r.a.createElement("td",{className:"table-primary"},r.a.createElement(te,{id:a,user:o,component:te})))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"profileindex"},r.a.createElement("h1",null,"Profiles"),r.a.createElement("h3",{style:{display:"inline-block"}},r.a.createElement(y.a,{to:"/createNew",className:"btn btn-primary"},"Add Profile")),r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,t))))}}]),t}(r.a.Component),oe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={profile:{name:"",location:"",new:!1},flashMessage:""},a.handleChange=function(e){var t=Object(ae.a)({},a.state.profile,Object(j.a)({},e.target.name,e.target.value));a.setState({profile:t})},a.createProfile=function(e,t){e.preventDefault();var n=a.state.profile;return fetch(D+"/profiles",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token token=".concat(t.token)},body:JSON.stringify({profile:{name:n.name,location:n.location}})}).then(function(){a.setState({new:!0}),a.props.history.push("/profileindex/")})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;if(!0===this.state.new)return r.a.createElement(d.a,{to:"/profiles"});var t=this.props.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"profileindex"},r.a.createElement("h1",null,"Add Profile"),r.a.createElement("p",null," ",this.state.flashMessage),r.a.createElement("form",null,r.a.createElement("input",{name:"name",type:"text",value:this.state.profile.name,onChange:this.handleChange,placeholder:"Name",style:{border:"solid 1px #000",width:"240px",marginLeft:"20px"}}),r.a.createElement("input",{name:"location",type:"text",value:this.state.profile.location,onChange:this.handleChange,placeholder:"Location",style:{border:"solid 1px #000",width:"240px",marginLeft:"20px"}}),r.a.createElement("button",{type:"submit",onClick:function(a){return e.createProfile(a,t)}},"Create"))))}}]),t}(r.a.Component),ie=Object(C.a)(oe),le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={user:e.user,profile:{name:"",location:""}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(R.a)(H.a.mark(function e(){var t,a,n;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,$.a.get("http://localhost:4741/profiles/".concat(t));case 3:a=e.sent,n=a.data.profile,this.setState({profile:n});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=(e.name,e.location,this.props.match.params.id),a=this.props.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{id:t,user:a,component:re}))}}]),t}(r.a.Component),ce=Object(C.a)(le),ue=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).setUser=function(t){return e.setState({user:t})},e.clearUser=function(){return e.setState({user:null})},e.flash=function(t,a){e.setState({flashMessage:t,flashType:a}),clearTimeout(e.messageTimeout),e.messageTimeout=setTimeout(function(){return e.setState({flashMessage:null})},2e3)},e.state={user:null,flashMessage:"",flashType:null},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.flashMessage,n=t.flashType,s=t.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{user:s}),a&&r.a.createElement("h3",{className:n},a),r.a.createElement("main",{className:"container"},r.a.createElement(m.a,{path:"/sign-up",render:function(){return r.a.createElement(L,{flash:e.flash,setUser:e.setUser})}}),r.a.createElement(m.a,{path:"/sign-in",render:function(){return r.a.createElement(z,{flash:e.flash,setUser:e.setUser})}}),r.a.createElement(f,{user:s,path:"/sign-out",render:function(){return r.a.createElement(M,{flash:e.flash,clearUser:e.clearUser,user:s})}}),r.a.createElement(f,{user:s,exact:!0,path:"/weatherapp",component:X}),r.a.createElement(f,{user:s,path:"/change-password",render:function(){return r.a.createElement(q,{flash:e.flash,user:s})}})),r.a.createElement(m.a,{exact:!0,path:"/profileindex/:id/updateprofile",render:function(){return r.a.createElement(re,{user:s})}}),r.a.createElement(m.a,{exact:!0,path:"/createNew",render:function(){return r.a.createElement(ie,{user:s})}}),r.a.createElement(f,{user:s,path:"/profileindex",render:function(){return r.a.createElement(se,{user:s})}}),r.a.createElement(m.a,{exact:!0,path:"/profileindex/:id",render:function(){return r.a.createElement(ce,{user:s})}}))}}]),t}(n.Component),pe=a(270),me=r.a.createElement(pe.a,null,r.a.createElement(ue,null));o.a.render(me,document.getElementById("root"))},57:function(e,t,a){},86:function(e,t,a){e.exports=a.p+"static/media/logo.d9297753.png"},90:function(e,t,a){e.exports=a(266)},95:function(e,t,a){}},[[90,2,1]]]);
//# sourceMappingURL=main.c8743ec8.chunk.js.map